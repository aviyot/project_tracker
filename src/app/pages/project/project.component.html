<div style="font-size: 1.5rem;">
  <mat-card>
    <mat-card-header>
      <mat-card-title>{{selectedProject.name}}
      </mat-card-title>
      <mat-card-subtitle>
        <span>{{selectedProject.startTime}}</span>
        <span>{{selectedProject.endTime}}</span>
        <span>{{selectedProject.lifecycleStage}}</span>
      </mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      <p>
        {{selectedProject.desc}}
      </p>
      <mat-nav-list>
        <a *ngIf="selectedProject.gitHub" target="_blank" mat-list-item [href]="selectedProject.gitHub"> גיטהב</a>
        <a *ngIf="selectedProject.site" target="_blank" mat-list-item [href]="selectedProject.site">אתר</a>
      </mat-nav-list>
    </mat-card-content>
    <mat-card-actions>
      <button mat-stroked-button color="accent" (click)="editProjectDesc()">ערוך</button>
      <app-project-desc-form *ngIf="projectDescState.edit" [project]="selectedProject"  [docRef]="docRef"></app-project-desc-form>
    </mat-card-actions>
  </mat-card>


  <!-- <div style="display: flex;flex-direction: column;padding-bottom: 2rem;">
    <span>{{selectedProject.name}}</span>
    <span>{{selectedProject.desc}}</span>
    <span>{{selectedProject.startTime}}</span>
    <span>{{selectedProject.endTime}}</span>
    <span>{{selectedProject.lifecycleStage}}</span>
    <div style="display: flex;gap: 1rem;margin: 1rem;">
      <span> <a target="_blank" [href]="selectedProject.gitHub"> גיטהב</a>
      </span>
      <span> <a target="_blank" href="selectedProject.site">אתר</a>
      </span>
    </div>
  </div> -->
  <hr>
  <h2>כלי פיתוח</h2>
  <div style="padding-bottom: 2rem;">
    <div *ngFor="let tool of selectedProject.tools" style="display: flex;flex-direction: column;">
      <span>{{tool.name}}</span>
      <span>{{tool.desc}}</span>
      <span>{{tool.purpose}}</span>
      <span>{{tool.ver}}</span>
      <a [href]="tool.githubLink">{{tool.githubLink}}</a>
      <a [href]="tool.webSite">{{tool.webSite}}</a>
      <a [href]="tool.npmLink">{{tool.npmLink}}</a>
    </div>
  </div>
  <hr>
  <h2>משימות לעשות <button mat-stroked-button color="primary" (click)="addTodo()"> הוסף משימה</button>
  </h2>
  <app-todo-form *ngIf="add" [docRef] = "docRef"></app-todo-form>
  <div style="padding-bottom: 2rem;">
    <div *ngFor="let todo of selectedProject.todos;let todoIndex = index"
      style="display: flex;flex-direction: column;margin-bottom: 10px;">
      <span>{{todo.title}}</span>
      <span>{{todo.detail}}</span>
      <span>{{todo.date}}</span>
      <span *ngIf="todo.done" style="background-color: green;color: white;">הושלם</span>
      <span *ngIf="!todo.done" style="background-color: orangered;color: white;">לא הושלם</span>
      <mat-action-list>
        <button mat-stroked-button color="accent" (click)="editTodo(todoIndex)">ערוך</button>
        <button mat-stroked-button color="warn" (click)="deleteTodo(todo)">מחק</button>
      </mat-action-list>
      <app-todo-form *ngIf="edit && (todoIndex === selectedIndex)" [todo]="todo"  [docRef] = "docRef" ></app-todo-form>
    </div>
  </div>
  <hr>
  <h2>זמני עבודה  <button mat-stroked-button color="primary" (click)="addWorkTime()"> הוסף</button></h2>
  <app-work-time-form *ngIf="workTimeState.add" [docRef] = "docRef"></app-work-time-form>
  <div style="padding-bottom: 2rem;">
    <div *ngFor="let workTime of selectedProject.workTimes;let workTimeIndex = index" style="display: flex;flex-direction: column;">
      <span>{{workTime.startTime}}</span>
      <span>{{workTime.endTime}}</span>
      <span>{{workTime.task}}</span>
      <mat-action-list>
        <button mat-stroked-button color="accent" (click)="editWorkTime(workTimeIndex)">ערוך</button>
        <button mat-stroked-button color="warn" (click)="deleteWorkTime(workTime)">מחק</button>
      </mat-action-list>
      <app-work-time-form *ngIf="workTimeState.edit && (workTimeIndex === workTimeState.selectedIndex)" [workTime] = "workTime"  [docRef] = "docRef" ></app-work-time-form>
    </div>
  </div>
  <hr>
  <h2>פיצרים</h2>
  <div style="padding-bottom: 2rem;">
    <div *ngFor="let feature of selectedProject.features" style="display: flex;flex-direction: column;">
      <span>{{feature.name}}</span>
      <span>{{feature.desc}}</span>
      <span>{{feature.startDate}}</span>
      <span>{{feature.endDate}}</span>
      <span>{{feature.progress}}</span>
    </div>
  </div>
  <hr>
  <div>
    <h2>שאלות</h2>
    <div *ngFor="let question of selectedProject.questions" style="display: flex;flex-direction: column;">
      <span> {{question.question}}</span>
      <span> {{question.featureId}}</span>
      <span> {{question.lifecycleStageId}}</span>
      <span> {{question.questionTime}}</span>
      <span> {{question.answered}}</span>
      <span *ngIf="question.answered"> נענה</span>
      <span *ngIf="!question.answered">לא נענה</span>
      <span> {{question.answerTime}}</span>
      <div *ngFor="let answerLink of question.answerLinks"
        style="display: flex;flex-direction: column;margin-right: 1rem;">
        <span>{{answerLink.from}}</span>
        <a [href]="answerLink.links" target="_blank"><span>{{answerLink.link}}</span> </a>
        <span *ngIf="answerLink.prefer">פתרון מעודף </span>
        <span *ngIf="!answerLink.prefer">פתרון נוסף</span>
      </div>
    </div>
  </div>
  <div>
    <h2>איך לעשות</h2>
    <div *ngFor="let howTodo of selectedProject.howTodos" style="display: flex;flex-direction: column;">
      <span>{{howTodo.title}}</span>
      <span>{{howTodo.desc}}</span>
      <div *ngFor="let step of howTodo.steps" style="display: flex;flex-direction: column;margin-right: 1rem;">
        <span>{{step}}</span>
      </div>

    </div>
  </div>
  <hr>
  <div style="position: fixed; left:1.5rem;bottom: 1rem;display: flex;gap:1rem">
    <button mat-raised-button color="warn" (click)="deleteProject()">Delete Project</button>
    <button mat-raised-button color="primary" (click)="editProject()">Edit Project</button>
  </div>
</div>